---
title: MacOSä½¿ç”¨Homebrewå®‰è£…çš„OpenSSL
categories: ç¼–ç¨‹ç¬”è®°
tags: [Linux, Mac]
date: 2017-09-23 07:33:33
---

## å‰è¨€

ä½¿ç”¨ Homebrew å®‰è£…æ–°ç‰ˆçš„ OpenSSLï¼Œå¹¶é“¾æ¥è„šæœ¬åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œæƒ³è¦æ›¿æ¢ç³»ç»Ÿè‡ªå¸¦çš„æ—§ç‰ˆçš„ OpenSSLã€‚ä½†æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„ OpenSSL å®‰è£…åœ¨`/usr/bin`ç›®å½•ä¸‹ï¼Œå› ä¸ºç³»ç»Ÿçº§çš„ä¿æŠ¤æ— æ³•åˆ é™¤å®ƒï¼Œåªèƒ½åˆ©ç”¨ç¯å¢ƒå˜é‡å’Œ link è®©ä¸¤ä¸ª OpenSSL å…±å­˜ã€‚

<!-- more -->

## æ—§ç‰ˆæœ¬

```shell
$ openssl version
OpenSSL 0.9.8zh 14 Jan 2016
```

## å®‰è£…æ–°ç‰ˆæœ¬

```shell
$ brew install openssl
Updating Homebrew...
==> Auto-updated Homebrew!
Updated 1 tap (caskroom/cask).
No changes to formulae.

==> Downloading https://homebrew.bintray.com/bottles/openssl-1.0.2l.sierra.bottle.tar.gz
Already downloaded: /Users/bingo/Library/Caches/Homebrew/openssl-1.0.2l.sierra.bottle.tar.gz
==> Pouring openssl-1.0.2l.sierra.bottle.tar.gz
==> Caveats
A CA file has been bootstrapped using certificates from the SystemRoots
keychain. To add additional certificates (e.g. the certificates added in
the System keychain), place .pem files in
  /usr/local/etc/openssl/certs

and run
  /usr/local/opt/openssl/bin/c_rehash

This formula is keg-only, which means it was not symlinked into /usr/local,
because Apple has deprecated use of OpenSSL in favor of its own TLS and crypto libraries.

If you need to have this software first in your PATH run:
  echo 'export PATH="/usr/local/opt/openssl/bin:$PATH"' >> ~/.zshrc

For compilers to find this software you may need to set:
    LDFLAGS:  -L/usr/local/opt/openssl/lib
    CPPFLAGS: -I/usr/local/opt/openssl/include
For pkg-config to find this software you may need to set:
    PKG_CONFIG_PATH: /usr/local/opt/openssl/lib/pkgconfig

==> Summary
ğŸº  /usr/local/Cellar/openssl/1.0.2l: 1,709 files, 12.2MB
```

## Link

å°è¯• link opensslï¼Œä½†ä¼¼ä¹å§¿åŠ¿ä¸å¤ªæ­£ç¡®ã€‚

```shell
$ brew link openssl
Warning: Refusing to link: openssl
Linking keg-only openssl means you may end up linking against the insecure,
deprecated system OpenSSL while using the headers from Homebrew's openssl.
Instead, pass the full include/library paths to your compiler e.g.:
  -I/usr/local/opt/openssl/include -L/usr/local/opt/openssl/lib
```

### è§£å†³

åœ¨ stackoverflow æ‰¾åˆ°äº†è§£å†³çš„æ–¹æ¡ˆï¼š[homebrew-refusing-to-link-openssl](https://stackoverflow.com/questions/38670295/homebrew-refusing-to-link-openssl)

```shell
$ ln -s -f /usr/local/Cellar/openssl/1.0.2l/bin/openssl /usr/bin/openssl
ln: /usr/bin/openssl: Permission denied
```

æƒé™ä¸è¶³ï¼Œç›´æ¥ sudo :

```shell
$ sudo ln -s -f /usr/local/Cellar/openssl/1.0.2l/bin/openssl /usr/bin/openssl
```

## å½“å‰ç‰ˆæœ¬

```shell
$ openssl version
OpenSSL 1.0.2l  25 May 2017
```

## åè¯

ç°åœ¨å·²ç»é»˜è®¤ä½¿ç”¨äº†æ–°ç‰ˆæœ¬çš„ OpenSSLï¼Œä½†å…¶å®æ²¡æœ‰è§£å†³æˆ‘çš„é—®é¢˜ã€‚

æˆ‘æ˜¯åœ¨ MacOS ä¸‹ï¼Œç¼–è¯‘ N2N æŠ¥é”™ ` fatal error: 'openssl/aes.h' file not found `ï¼Œæ‰€ä»¥æ€€ç–‘æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„æ—§ç‰ˆæœ¬ OpenSSL æˆ–è€…ç¯å¢ƒæœ‰é—®é¢˜ã€‚ä½†ç°åœ¨ä½¿ç”¨æ–°ç‰ˆ OpenSSL é—®é¢˜ä¾ç„¶å­˜åœ¨ï¼Œå¯èƒ½æ˜¯å…¶å®ƒåŸå› å¯¼è‡´çš„ï¼Œæš‚æ—¶å°±å…ˆæ”¾ä¸‹äº†ï¼ŒMark ä¸€ä¸‹ï¼Œä»¥åæœ‰æœºä¼šå†çœ‹èƒ½ä¸èƒ½è§£å†³å§ã€‚

